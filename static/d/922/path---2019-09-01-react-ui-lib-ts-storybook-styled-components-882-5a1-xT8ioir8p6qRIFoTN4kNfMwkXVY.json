{"data":{"site":{"siteMetadata":{"title":"Canastro's notes","author":"Ricardo Canastro"}},"markdownRemark":{"id":"645e5973-b823-5fe5-ae7f-cee23ea3814a","excerpt":"It’s pretty common to repeat yourself and recreate the same basic ui components multiple times when starting new projects. In this post I’ll try  to guide you…","html":"<p>It’s pretty common to repeat yourself and recreate the same basic ui components multiple times when starting new projects. In this post I’ll try  to guide you in creating a reusable module for your UI components.</p>\n<p>This project should be self-documented through tsdocs, have a great way for developers (and designers or product owners) to see the available components, all their different options / behaviours and how to use it.</p>\n<h1>Kickoff and setup</h1>\n<p>Create a folder for your ui-kit, lets call it, <code class=\"language-text\">bob-ross-kit</code>. Do the npm init thing and add the following dependencies:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">  <span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"@storybook/addon-info\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^4.1.4\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@storybook/addon-knobs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^4.1.4\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@storybook/addons\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^4.1.4\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@storybook/react\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^4.1.4\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@types/react\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^16.7.17\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@types/react-dom\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^16.0.11\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@types/styled-components\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^4.1.4\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"awesome-typescript-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^5.2.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"babel-core\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.26.3\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"babel-plugin-styled-components\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.10.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"react-docgen-typescript-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.1.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"typescript\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.2.2\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"react\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^16.6.3\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"react-dom\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^16.6.3\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"styled-components\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^4.1.3\"</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>WOW, thats a lot of dependencies for a empty project :D Do not worry, we’re going to use them all!</p>\n<h2>Storybook</h2>\n<blockquote>\n<p>Storybook is a UI development environment and playground for UI components. The tool enables users to create components independently and showcase components interactively in an isolated development environment.</p>\n</blockquote>\n<p>We’re going to add <a href=\"https://storybook.js.org/\">storybook</a> into your project a a few addons to add extra features to our stories.</p>\n<p><strong><a href=\"https://www.npmjs.com/package/@storybook/addon-info\">@storybook/addon-info</a>:</strong>\nshow additional information about your stories, properly configured it can show jsdocs of your props and the jsx of the usage of your component</p>\n<p><strong><a href=\"https://www.npmjs.com/package/@storybook/addon-knobs\">@storybook/addon-knobs</a>:</strong>\nadds a section on the bottom where you can add props modifiers to see how a component reacts to different props;</p>\n<p>In order to configure storybook, start by creating a <code class=\"language-text\">.storybook</code> folder with <code class=\"language-text\">addons.js</code> and <code class=\"language-text\">config.js</code> files.</p>\n<ol>\n<li>\n<p>Create a <code class=\"language-text\">addons.js</code> file to import our addons</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token string\">'@storybook/addon-knobs/register'</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ol>\n<ol start=\"2\">\n<li>Create a <code class=\"language-text\">config.js</code> file. Here we configure our addons and tell storybook how to load your stories. Personally I prefer to have the stories as a file next to the component, prefixed with <code class=\"language-text\">.stories.js</code>.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> addDecorator<span class=\"token punctuation\">,</span> configure<span class=\"token punctuation\">,</span> setAddon <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@storybook/react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> withInfo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@storybook/addon-info'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> withKnobs <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@storybook/addon-knobs/react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">addDecorator</span><span class=\"token punctuation\">(</span><span class=\"token function\">withInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> header<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> inline<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">addDecorator</span><span class=\"token punctuation\">(</span>withKnobs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> req <span class=\"token operator\">=</span> require<span class=\"token punctuation\">.</span><span class=\"token function\">context</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../src'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token regex\">/.stories.js$/</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">loadStories</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  req<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>file <span class=\"token operator\">=></span> <span class=\"token function\">req</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">configure</span><span class=\"token punctuation\">(</span>loadStories<span class=\"token punctuation\">,</span> module<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ol start=\"3\">\n<li>Add a storybook script to your package.json: </li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"storybook\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"start-storybook -p 6006 -c .storybook\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Typescript</h2>\n<blockquote>\n<p>TypeScript is an open-source programming language developed and maintained by Microsoft. It is a strict syntactical superset of JavaScript, and adds optional static typing to the language.</p>\n</blockquote>\n<p>Besides the obvious of adding static typing to our code, using <a href=\"https://www.typescriptlang.org/\">typescript</a> is also great for IDE integration. For a reusable module is really great to have a awesome autocomplete, this will allow developers to use your components without having to jump to the documentation every time.</p>\n<ol>\n<li>Init the typescript setup with <code class=\"language-text\">npx tsc --init</code> this should create a default <code class=\"language-text\">tsconfig</code> file and make some changes to it:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"build/lib\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"lib\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"es5\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"es6\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"es7\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"es2017\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"dom\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"sourceMap\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"allowJs\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n<span class=\"token property\">\"jsx\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"moduleResolution\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"rootDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"src\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"baseUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"src\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"experimentalDecorators\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"declaration\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></code></pre></div>\n<ol start=\"2\">\n<li>In order to use storybook with typescript we need to create a <code class=\"language-text\">.storybook/webpack.config.js</code> file:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> TSDocgenPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react-docgen-typescript-webpack-plugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>baseConfig<span class=\"token punctuation\">,</span> env<span class=\"token punctuation\">,</span> defaultConfig<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// webpack typescript loader</span>\n  defaultConfig<span class=\"token punctuation\">.</span>module<span class=\"token punctuation\">.</span>rules<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    test<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\.(ts|tsx)$/</span><span class=\"token punctuation\">,</span>\n    loader<span class=\"token punctuation\">:</span> require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'awesome-typescript-loader'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Doc gen plugin</span>\n  defaultConfig<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">TSDocgenPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  defaultConfig<span class=\"token punctuation\">.</span>resolve<span class=\"token punctuation\">.</span>extensions<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.ts'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.tsx'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> defaultConfig<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You might notice the <code class=\"language-text\">TSDocgenPlugin</code> plugin. This will pick your tsdocs from your typings and together with <code class=\"language-text\">@storybook/addon-info</code> will endow your stories with info from your props. </p>\n<p>This:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/** Button content  */</span>\n  children<span class=\"token punctuation\">:</span> React<span class=\"token punctuation\">.</span>ReactNode<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">/** Callback to handle the click event  */</span>\n  onClick<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">/**\n   * Disables onClick\n   *\n   * @default false\n   **/</span>\n  disabled<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> boolean<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Becomes:\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a24862281f7e5399450329f364ff1312/07eac/ts-docgen-storybook-prop-types.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 34.67492260061919%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA8ElEQVQoz41R146EQAzb//9BRBeI3nuHLPZpTuzqHi6SBZM4TnvVdS22bUsQBGJZlqRpKtd1yXmev8D7v/Za11WqqpKu6yTLMhmG4U+iElZ4FnuCgq7rskvTNMX3fUmShD7HcQgUgqmkb/sQ3LZNNE0TXdc5rmEYFC+Kgj4Ie57HIvu+U6BtWwnDUKIoEjT0nIAdxnHMhKZpSEKXWAHeiC/LLNM0cTXw5XnOgn3f37GFHICCcEAQBJCRhEPhf55nOY7jTtrv70kOxke8LEsKAuCO4/hzFCTAASAIQXSjFo942y4UnaaRneNwiqN2qkZ+A8jIG3eWYsaQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"TS DocGen Storybook\"\n        title=\"\"\n        src=\"/static/a24862281f7e5399450329f364ff1312/fb8a0/ts-docgen-storybook-prop-types.png\"\n        srcset=\"/static/a24862281f7e5399450329f364ff1312/1a291/ts-docgen-storybook-prop-types.png 148w,\n/static/a24862281f7e5399450329f364ff1312/2bc4a/ts-docgen-storybook-prop-types.png 295w,\n/static/a24862281f7e5399450329f364ff1312/fb8a0/ts-docgen-storybook-prop-types.png 590w,\n/static/a24862281f7e5399450329f364ff1312/526de/ts-docgen-storybook-prop-types.png 885w,\n/static/a24862281f7e5399450329f364ff1312/fa2eb/ts-docgen-storybook-prop-types.png 1180w,\n/static/a24862281f7e5399450329f364ff1312/07eac/ts-docgen-storybook-prop-types.png 1292w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ol start=\"3\">\n<li>Add a build script to your package.json:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    ...\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tsc\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>This is not exactly required, you can call directly tsc, but personally I prefer to have all scripts with npm aliases.</p>\n<h2>Styled Components</h2>\n<blockquote>\n<p>Utilising tagged template literals (a recent addition to JavaScript) and the power of CSS, styled-components allows you to write actual CSS code to style your components. It also removes the mapping between components and styles – using components as a low-level styling construct could not be easier!</p>\n</blockquote>\n<ol>\n<li>Create a .babelrc file in the root of your project with: <code class=\"language-text\">{ &quot;plugins&quot;: [&quot;babel-plugin-styled-components&quot;] }</code></li>\n</ol>\n<p>And thats it. The project is finally configured… </p>\n<h1>Create your first component</h1>\n<p>Lets create a simple button, in a file called <code class=\"language-text\">src/styled-button/styled-button.jsx</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> styled <span class=\"token keyword\">from</span> <span class=\"token string\">'styled-components'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/** Button content  */</span>\n  children<span class=\"token punctuation\">:</span> React<span class=\"token punctuation\">.</span>ReactNode<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">/** Callback to handle the click event  */</span>\n  onClick<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">/**\n   * Disables onClick\n   *\n   * @default false\n   **/</span>\n  disabled<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> boolean<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">noop</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> RootStyledButton <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>button<span class=\"token template-string\"><span class=\"token string\">`\n  padding: 0px 20px;\n  height: 49px;\n  border-radius: 2px;\n  border: 2px solid #3d5567;\n  display: inline-flex;\n  background-color: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>disabled <span class=\"token operator\">?</span> <span class=\"token string\">'red'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'blue'</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;\n`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> ButtonSpan <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>span<span class=\"token template-string\"><span class=\"token string\">`\n  margin: auto;\n  font-size: 16px;\n  font-weight: bold;\n  text-align: center;\n  color: #fff;\n  text-transform: uppercase;\n`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">StyledButton</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">:</span> Props<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> children<span class=\"token punctuation\">,</span> onClick<span class=\"token punctuation\">,</span> disabled <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>RootStyledButton disabled<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>disabled<span class=\"token punctuation\">}</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>disabled <span class=\"token operator\">?</span> onClick <span class=\"token punctuation\">:</span> noop<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>ButtonSpan<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ButtonSpan<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>RootStyledButton<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1>Create your first story</h1>\n<p>As mentioned before, we conventioned to have our stories next to our components with the prefix <code class=\"language-text\">.stories.jsx</code>. So lets create a file called\n<code class=\"language-text\">styled-button.stories.jsx</code> next to our component with the following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> text<span class=\"token punctuation\">,</span> boolean <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@storybook/addon-knobs/react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> storiesOf <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@storybook/react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> StyledButton <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./styled-button'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">storiesOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'StyledButton'</span><span class=\"token punctuation\">,</span> module<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'basic'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>StyledButton disabled<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">boolean</span><span class=\"token punctuation\">(</span><span class=\"token string\">'disabled'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Hello World'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>StyledButton<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>As you can see we use some helper functions from <code class=\"language-text\">@storybook/addon-knobs</code>. These functions receive a name and a default value to pass to the component, while at the same time gathers info to display inputs to dynamically allow the user to change the values on the UI.</p>\n<p>You can now run <code class=\"language-text\">npm run storybook</code>, open <code class=\"language-text\">http://localhost:6006/</code> and voilá.</p>\n<h1>Create a theme</h1>\n<p>Probably your components will have some common UI characteristics, such as colors, paddings, fonts, etc. So having a theme to normalize this will come handy. </p>\n<p>In this tutorial we’re just going to create a palette for the theme, but lets create it in a separate file to promote some separation instead of creating a huge file with all theme variables.</p>\n<p><code class=\"language-text\">src/theme/palette.ts</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> palette <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  white<span class=\"token punctuation\">:</span> <span class=\"token string\">'#fff'</span><span class=\"token punctuation\">,</span>\n  grey<span class=\"token punctuation\">:</span> <span class=\"token string\">'#f7f9fa'</span><span class=\"token punctuation\">,</span>\n  black<span class=\"token punctuation\">:</span> <span class=\"token string\">'#222'</span><span class=\"token punctuation\">,</span>\n  primary<span class=\"token punctuation\">:</span> <span class=\"token string\">'#6d30e7'</span><span class=\"token punctuation\">,</span>\n  secondary<span class=\"token punctuation\">:</span> <span class=\"token string\">'#dfdded'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> palette<span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">src/theme/index.ts</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> palette <span class=\"token keyword\">from</span> <span class=\"token string\">'./palette'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n    palette\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In order to use this theme we’re going to use the styled-components <a href=\"https://www.styled-components.com/docs/advanced#theming\">ThemeProvider</a>, the usage would be something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>ThemeProvider theme<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>theme<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>StyledButton<span class=\"token operator\">></span>Hello World<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>StyledButton<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ThemeProvider<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>But, has you might notice, the StyleButton does not do anything with the provided theme, so we need to change something. If you go back to your <code class=\"language-text\">styled-button.jsx</code> you can change your RootStyledButton to use theme colors instead of hardcoded colors for example. To access the theme you add a function to your template literal and get the theme from the props:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> RootStyledButton <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>button<span class=\"token template-string\"><span class=\"token string\">`\n  padding: 0px 20px;\n  height: 49px;\n  border-radius: 2px;\n  border: 2px solid </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>props <span class=\"token operator\">=></span> props<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">.</span>secondary<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;\n  display: inline-flex;\n  background-color: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>props <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>disabled <span class=\"token operator\">?</span> props<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">.</span>secondary <span class=\"token punctuation\">:</span> props<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">.</span>primary<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;\n`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>So, now we need to update our story to also include the theme. Storybook has a function called <code class=\"language-text\">addDecorator</code> which allows you to define a high order component that will be use with all your stories, so just make sure you import the ThemeProvider and the theme and add your decorator to your story:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">.</span><span class=\"token function\">addDecorator</span><span class=\"token punctuation\">(</span>renderStory <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>ThemeProvider theme<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>theme<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token function\">renderStory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ThemeProvider<span class=\"token operator\">></span><span class=\"token punctuation\">)</span></code></pre></div>\n<h1>Publishing and Usage</h1>","frontmatter":{"title":"React UI-Kit - with Typescript, storybook and styled-components","date":"January 01, 2019"}}},"pageContext":{"slug":"/2019-09-01-react-ui-lib-ts-storybook-styled-components/","previous":{"fields":{"slug":"/2017-12-09---speedtracker/"},"frontmatter":{"title":"SpeedTracker - Periodic Performance Tests"}},"next":null}}